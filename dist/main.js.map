{"version":3,"sources":["main.js"],"names":["TOPRATED_API_KEY","TRENDING_API_KEY","NOWPLAYING_API_KEY","navigator","serviceWorker","register","then","reg","console","log","err","moviesComponent","movies","topRatedGallery","document","querySelector","trendingGallery","nowplayingGallery","moviesTemp","getElementById","innerHTML","trendingTemp","nowplayingTemp","fetchData","key","fetch","render","moviesData","temp","gallery","results","i","length","rendered","Mustache","poster","concat","poster_path","initialize_flickity","element","arrows","Flickity","prevNextButtons","autoPlay","freeScroll","contain","pageDots","init","res","json","data","title","backdrop_path","renderPlaying"],"mappings":"AAAA,aAAA,IAAMA,iBACJ,uGACIC,iBAAkB,yFAClBC,mBAAmB,gHAEtB,kBAAmBC,WACpBA,UAAUC,cAAcC,SAAS,SAChCC,MAAK,SAAAC,GAAG,OAAEC,QAAQC,IAAI,WAAWF,MADlC,OAEO,SAAAG,GAAG,OAAEF,QAAQC,IAAI,qBAAqBC,MAI/C,IAAIC,gBAAmB,WACrB,IAAIC,EAEAC,EAAkBC,SAASC,cAAc,aACzCC,EAAgBF,SAASC,cAAc,aACvCE,EAAkBH,SAASC,cAAc,eAEzCG,EAAaJ,SAASK,eAAe,cAAcC,UACnDC,EAAaP,SAASK,eAAe,gBAAgBC,UACrDE,EAAiBR,SAASK,eAAe,kBA4B7C,SAASI,EAAUC,GACjB,OAAOC,MAAMD,GAEf,SAASE,EAAOC,EAAWC,EAAKC,GAC9BjB,EAASe,EAAWG,QACpB,IAAK,IAAIC,EAAI,EAAGA,EAAInB,EAAOoB,OAAQD,IAAK,CACtC,IAAIE,EAAWC,SAASR,OAAOE,EAAM,CACnCO,OAAM,mCAAAC,OAAqCxB,EAAOmB,GAAGM,eAEvDR,EAAQT,WAAaa,GAkBzB,SAASK,EAAoBC,EAAQC,GAEvB,IAAIC,SAASF,EAAS,CAGhCG,gBAAiBF,EACjBG,UAAU,EAEVC,YAAY,EACZC,SAAS,EACTC,UAAU,IAId,MAAO,CACLC,KApEF,WAIExB,EAAUrB,oBACTI,MAAK,SAAA0C,GAAG,OAAEA,EAAIC,UACd3C,MAAK,SAAC4C,IAiCT,SAAuBvB,EAAWC,EAAKC,GAErCjB,EAAQe,EAAWG,QAEvB,IAAK,IAAIC,EAAI,EAAGA,EAAInB,EAAOoB,OAAQD,IAAK,CAEtC,IAAIE,EAAWC,SAASR,OAAOE,EAAKR,UAAW,CAC7C+B,MAAMvC,EAAOmB,GAAGoB,MACdhB,OAAM,mCAAAC,OAAqCxB,EAAOmB,GAAGqB,iBAGzDvB,EAAQT,WAAaa,GA3CjBoB,CAAcH,EAAK5B,EAAeL,GAClCqB,EAAoBrB,GAAkB,MAJxC,OAKS,SAAAP,GAAG,OAAEF,QAAQC,IAAIC,MAE1Ba,EAAUvB,kBACPM,MAAK,SAAC0C,GAAD,OAASA,EAAIC,UAClB3C,MAAK,SAAC4C,GACLxB,EAAOwB,EAAKhC,EAAWL,GACvByB,EAAoBzB,GAAgB,MAJxC,OAKW,SAAAH,GAAG,OAAEF,QAAQC,IAAIC,MAE1Ba,EAAUtB,kBACTK,MAAK,SAAC0C,GAAD,OAASA,EAAIC,UAClB3C,MAAK,SAAC4C,GACLxB,EAAOwB,EAAK7B,EAAaL,GACzBsB,EAAoBtB,GAAgB,MAJtC,OAKS,SAAAN,GAAG,OAAEF,QAAQC,IAAIC,QAlCT,GAmFvBC,gBAAgBoC","file":"main.js","sourcesContent":["const TOPRATED_API_KEY =\r\n  \"https://api.themoviedb.org/3/movie/top_rated?api_key=4ad8cb5b2b8f3f393d5fbb1e73651f69&language=en-US\";\r\nconst TRENDING_API_KEY= \"https://api.themoviedb.org/3/trending/all/day?api_key=4ad8cb5b2b8f3f393d5fbb1e73651f69\";\r\nconst NOWPLAYING_API_KEY=\"https://api.themoviedb.org/3/movie/now_playing?api_key=4ad8cb5b2b8f3f393d5fbb1e73651f69&language=en-US&page=1\";\r\n//============================================================service workers registeration============================\\\\\r\nif('serviceWorker' in navigator){\r\n  navigator.serviceWorker.register('sw.js')\r\n  .then(reg=>console.log(\"SW reged\",reg))\r\n  .catch(err=>console.log(\"SW didn't register\",err))\r\n}\r\n\r\n//============================================================MOVIES API================================================\\\\\r\nvar moviesComponent = (function () {\r\n  var movies;\r\n  //========================galleryies\r\n  var topRatedGallery = document.querySelector(\".topRated\");\r\n  var trendingGallery=document.querySelector(\".trending\");\r\n  var nowplayingGallery=document.querySelector(\".nowPlaying\");\r\n//==========================templates\r\n  var moviesTemp = document.getElementById(\"moviestemp\").innerHTML;\r\n  var trendingTemp=document.getElementById(\"trendingTemp\").innerHTML;\r\n  var nowplayingTemp = document.getElementById(\"nowplayingTemp\");\r\n\r\n  function init() {\r\n\r\n\r\n\r\n    fetchData(NOWPLAYING_API_KEY)\r\n    .then(res=>res.json())\r\n    .then((data) => {\r\n      renderPlaying(data,nowplayingTemp,nowplayingGallery);\r\n      initialize_flickity(nowplayingGallery,false);\r\n    }).catch(err=>console.log(err));\r\n\r\n    fetchData(TOPRATED_API_KEY)\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        render(data,moviesTemp,topRatedGallery);\r\n        initialize_flickity(topRatedGallery,true)\r\n      }).catch(err=>console.log(err));\r\n\r\n      fetchData(TRENDING_API_KEY)\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        render(data,trendingTemp,trendingGallery);\r\n        initialize_flickity(trendingGallery,true);\r\n      }).catch(err=>console.log(err));\r\n  }\r\n\r\n  function fetchData(key) {\r\n    return fetch(key);\r\n  }\r\n  function render(moviesData,temp,gallery) {\r\n    movies = moviesData.results;\r\n    for (var i = 0; i < movies.length; i++) {\r\n      var rendered = Mustache.render(temp, {\r\n        poster: `https://image.tmdb.org/t/p/w200/${movies[i].poster_path}`,\r\n      });\r\n      gallery.innerHTML += rendered;\r\n    }\r\n  }\r\n\r\n  function renderPlaying(moviesData,temp,gallery){\r\n   // console.log(moviesData)\r\n    movies =moviesData.results;\r\n\r\nfor (var i = 0; i < movies.length; i++) {\r\n // temp.style.backgroundImage=`url(\"https://image.tmdb.org/t/p/w200/${movies[i].poster_path}\")`;\r\n  var rendered = Mustache.render(temp.innerHTML, {\r\n    title:movies[i].title\r\n    , poster: `https://image.tmdb.org/t/p/w500/${movies[i].backdrop_path}`\r\n  });\r\n  \r\n  gallery.innerHTML += rendered;\r\n}\r\n  }\r\n  function initialize_flickity(element,arrows) {\r\n   \r\n    var flkty = new Flickity(element, {\r\n      // options\r\n      //wrapAround: true,\r\n      prevNextButtons: arrows,\r\n      autoPlay: true,\r\n     // prevNextButtons: false,\r\n      freeScroll: true,\r\n      contain: true,\r\n      pageDots: false,\r\n    });\r\n  }\r\n  \r\n  return {\r\n    init: init,\r\n  };\r\n})();\r\n\r\nmoviesComponent.init();\r\n\r\n// //====================================old script========================================\\\\\r\n// //get fetched data from news API\r\n// let movies;\r\n\r\n// fetch(MOVIES_API_KEY)\r\n//   .then((res) => res.json())\r\n//   .then((data) => initialize(data))\r\n//   .catch((err) => console.log(\"Error\", err));\r\n\r\n// function initialize(moviesData) {\r\n//   console.log(moviesData)\r\n//   movies = moviesData.results;\r\n//   let gallery = document.querySelector(\".gallery\");\r\n//   let template = document.getElementById(\"moviestemp\").innerHTML;\r\n\r\n//   for (let i = 0; i < movies.length; i++) {\r\n//     var rendered = Mustache.render(template, {\r\n//       poster:`https://image.tmdb.org/t/p/w200/${movies[i].poster_path}`\r\n//     });\r\n\r\n//     gallery.innerHTML += rendered;\r\n//   }\r\n// }\r\n\r\n// // Delay in loading flickity plugin\r\n// setTimeout(load_js, 0);\r\n\r\n// function load_js() {\r\n//   // Get the head tag\r\n//   var head_ID = document.getElementsByTagName(\"head\")[0];\r\n//   // Create script element\r\n//   var script_element = document.createElement(\"script\");\r\n//   // Set the script type to JavaScript\r\n//   script_element.type = \"text/javascript\";\r\n//   // External JS file\r\n//   script_element.src = \"https://unpkg.com/flickity@2/dist/flickity.pkgd.min.js\";\r\n//   head_ID.appendChild(script_element);\r\n// }\r\n"]}